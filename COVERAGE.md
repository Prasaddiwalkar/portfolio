# Jest Code Coverage Documentation

This project uses Jest (the default testing framework for React applications) for comprehensive code coverage reporting with multiple output formats.

## Available Scripts

### Basic Coverage
```bash
npm run test:coverage
```
Runs all tests with coverage collection and generates reports in multiple formats.

### HTML Coverage Reports
```bash
npm run test:coverage:html
```
Generates the standard Jest HTML coverage report (coverage/index.html).

### Enhanced Jest Coverage Report
```bash
npm run coverage:report
```
Generates a custom Jest HTML coverage report (coverage/custom-report.html).

## Coverage Output Formats

The following coverage reports are generated in the `coverage/` directory:

1. **HTML Report** (`coverage/index.html`) - Standard Jest HTML report
2. **Enhanced Report** (`coverage/custom-report.html`) - Custom styled Jest report
3. **LCOV Report** (`coverage/lcov-report/`) - Detailed HTML reports
4. **JSON Report** (`coverage/coverage-final.json`) - Raw coverage data
5. **Clover XML** (`coverage/clover.xml`) - XML format for CI/CD
6. **LCOV Info** (`coverage/lcov.info`) - LCOV format for tools like SonarQube

## Coverage Thresholds

Current coverage thresholds are set to:
- **Statements**: 60%
- **Branches**: 60%  
- **Functions**: 60%
- **Lines**: 60%

These can be adjusted in `package.json` under the `jest.coverageThreshold` section.

## Test Structure

Tests are located in the `tests/` directory with the following structure:
- `tests/unit/` - Unit tests
- `tests/e2e/` - End-to-end tests
- `tests/helpers/` - Test utilities and setup

Note: Currently, only tests in `src/` directory are being executed due to Create React App limitations. To run tests from the `tests/` directory, you would need to eject from CRA or use a custom Jest configuration.

## Current Coverage Status

Based on the latest run:
- **Overall Coverage**: 4.82% statements
- **Best Covered Module**: `src/utils/labelUtils.ts` (84.61% statements)
- **Status**: Below threshold (requires more test coverage)

## Viewing Reports

### In Browser
1. **Standard Report**: Open `coverage/index.html` in your browser
2. **Enhanced Report**: Open `coverage/custom-report.html` in your browser

### In Terminal
Coverage summary is displayed after each test run.

## Integration with CI/CD

The generated reports can be used with various CI/CD tools:
- **Clover XML**: For Jenkins, Bamboo
- **LCOV**: For SonarQube, Codecov, Coveralls
- **JSON**: For custom integrations

## Improving Coverage

To improve coverage:
1. Add more unit tests in `src/` directory (following the pattern `*.test.{ts,tsx}`)
2. Focus on uncovered lines shown in the reports
3. Test edge cases and error scenarios
4. Add integration tests for components

## Troubleshooting

If coverage reports are not generating:
1. Ensure tests are passing
2. Check that test files are in the correct location (`src/` directory)
3. Verify Jest configuration in `package.json`
4. Run tests with `--verbose` flag for debugging

## Custom Report Generator

The enhanced Jest report is generated by `scripts/generate-coverage-report.js`, which:
- Reads coverage data from `coverage/coverage-final.json`
- Creates a custom HTML report with visual progress bars
- Shows file-by-file coverage details
- Includes Jest threshold status indicators
